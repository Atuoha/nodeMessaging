'use strict';const express=require("express"),app=express(),router=express.Router(),http=require("http").Server(app),io=require("socket.io")(http),Message=require("../model/Message");router.all("/*",(b,c,a)=>{b.app.locals.layout="home";a()});router.get("/",(b,c)=>{c.render("home/index")});router.get("/message",(b,c)=>{Message.find().then(a=>c.send(a)).catch(a=>console.log("Error"))});
router.post("/create_msg",(b,c)=>{(new Message(b.body)).save().then(a=>{c.sendStatus(200);io.emit("message",b.body)}).catch(a=>console.log(`Error due to ${a}`))});module.exports=router;