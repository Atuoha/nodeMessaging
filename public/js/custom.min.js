'use strict';let socket=io();$(document).ready(()=>{function b(){$.ajax({url:"/message",type:"GET",cache:!1,success:a=>{a.error||(console.log(a),a.forEach(c=>{console.log(c);c=`
            <div class="chat-message right" style="float:right;background-color:#1e88e5;color:white;">
                <img class="rounded-circle" width="30" src="/uploads/default.png"alt="img">    
                <b>You:</b> <span class="msg">${c.message}</span> <br> 
                <span class="text-small" style="float:right"><sub>2 mins ago</sub></span>
                </div>

                <div class="chat-message" style="background-color:white">
                    <img class="rounded-circle" width="30" src="/uploads/profiles.png"alt="img">    
                    <b>${c.name}:</b> <span class="white-text">Message received successfully :)</span><br>
                    <span class="text-small" style="float:right"><sub>1 min ago</sub></span>
                </div> 
            `;$(".chat-wrapper").append(c)}))}})}function d(a){$.ajax({url:"/create_msg",type:"POST",data:a,cache:!1,success:c=>{c.error||($(".chat-wrapper").html(""),b())}})}b();$("form").submit(function(a){a.preventDefault();console.log(a);a=$(this).serialize();let c=$("#msg").val(),e=$("#name").val();""!==c&&""!=e?(console.log(a),d(a),$("form").trigger("reset")):(error_alert(),console.log("Empty"))})});socket.on("message","addMessage");
function error_alert(){let b=$(".error");b.fadeIn("slow");b.attr("class","alert alert-danger error");b.html("Inputs are not meant to be empty!");setTimeout(()=>{clear_error()},3E3)}function clear_error(){let b=$(".alert");b&&b.fadeOut("slow")};